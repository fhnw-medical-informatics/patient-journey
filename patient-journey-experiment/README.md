# patient-journey-experiments

This folder is a playground for intent based UI experiments.

## Setup

### Prerequisites

Create a `.env` file in the root directory of this project with the following content:

```
OPENAI_API_KEY=<your-openai-api-key>
OPENAI_ORG=<your-openai-org-id>
```

### Install dependencies

```
yarn install
```

### Create the experiments folder

The experiments folder is where the results of the experiments will be stored.

```
mkdir experiments
```

### Prepare the context and functions

The context is basically the instructions (messages) that are sent to the AI. The functions are are passed alongside the messages for OpenAI's function calling feature.

The context is defined in the `context.json` file. The functions are defined in the `functions.json` file.

Make sure that for each function you define, there is an implementation of that function in the ``functions.ts` file.

## Run an experiment

To run an experiment, execute the following command after you have completed the setup and prepared the context and functions:

```
deno run --unstable --allow-net --allow-read --allow-write --allow-env index.ts <experiment-name>  [<functions-module>] [<messages-module>]
```

For example:

```
deno run --unstable --allow-net --allow-read --allow-write --allow-env index.ts 001
```

This will run the experiment with the name `001` and will output the results in the `experiments` folder. The results will be stored in the following files:

- `experiments/001-context.json` - the context that was used for the experiment
- `experiments/001-functions.json` - the functions that were used for the experiment
- `experiments/001-messages.json` - the whole conversation that was generated by the AI (including the context).

The `messages.json` file can be used as a source for the context of a new experiment.

Another example with custom functions and messages:

```
deno run --unstable --allow-net --allow-read --allow-write --allow-env index.ts 001 ./functions.ts ./messages.ts
```

This will run the experiment with the name `001` using the functions defined in the `functions.ts` file and the messages defined in the `messages.ts` file.
